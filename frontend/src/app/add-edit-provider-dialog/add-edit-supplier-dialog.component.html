<h1 mat-dialog-title>{{ data.isNew ? 'Add Supplier' : 'Edit Supplier' }}</h1>

<div mat-dialog-content>
    <form [formGroup]="supplierForm">
        <div class="form-row">

            <!-- Business Name -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Business Name</mat-label>
                    <input matInput formControlName="businessName" placeholder="Enter business name" required>
                    <mat-error
                        *ngIf="supplierForm.get('businessName')?.touched && supplierForm.get('businessName')?.hasError('required')">
                        Please enter the business name.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Trade Name -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Trade Name</mat-label>
                    <input matInput formControlName="tradeName" placeholder="Enter trade name" required>
                    <mat-error
                        *ngIf="supplierForm.get('tradeName')?.touched && supplierForm.get('tradeName')?.hasError('required')">
                        Please enter the trade name.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Tax ID -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Tax ID</mat-label>
                    <input matInput formControlName="taxId" placeholder="Enter tax ID" required>
                    <mat-error
                        *ngIf="supplierForm.get('taxId')?.touched && supplierForm.get('taxId')?.hasError('required')">
                        Please enter the tax ID.
                    </mat-error>
                    <mat-error
                        *ngIf="supplierForm.get('taxId')?.touched && supplierForm.get('taxId')?.hasError('pattern')">
                        Tax ID must be exactly 11 digits.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Phone -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Phone</mat-label>
                    <input matInput formControlName="phone" placeholder="Enter phone number" required>
                    <mat-error
                        *ngIf="supplierForm.get('phone')?.touched && supplierForm.get('phone')?.hasError('required')">
                        Please enter a phone number.
                    </mat-error>
                    <mat-error
                        *ngIf="supplierForm.get('phone')?.touched && supplierForm.get('phone')?.hasError('pattern')">
                        Phone number must be between 7 and 15 digits.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Email -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Email</mat-label>
                    <input matInput formControlName="email" placeholder="Enter email" required>
                    <mat-error
                        *ngIf="supplierForm.get('email')?.touched && supplierForm.get('email')?.hasError('required')">
                        Please enter an email address.
                    </mat-error>
                    <mat-error
                        *ngIf="supplierForm.get('email')?.touched && supplierForm.get('email')?.hasError('email')">
                        Please enter a valid email address.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Country -->
            <div class="form-section country">
                <mat-label>Country</mat-label>
                <ng-country-select [lang]="'en'" [formControl]="countryControl" (countrySelected)="handleSelection($event)"
                    [placeholder]="'Select a country'"></ng-country-select>
                <mat-error *ngIf="countryControl.touched && countryControl.hasError('required')">
                    Please select a country.
                </mat-error>
            </div>

            <!-- Website -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Website</mat-label>
                    <input matInput formControlName="website" placeholder="Enter website URL" required>
                    <mat-error
                        *ngIf="supplierForm.get('website')?.touched && supplierForm.get('website')?.hasError('required')">
                        Please enter the website URL.
                    </mat-error>
                    <mat-error
                        *ngIf="supplierForm.get('website')?.touched && supplierForm.get('website')?.hasError('pattern')">
                        Website must start with http:// or https://.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Address -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Address</mat-label>
                    <input matInput formControlName="address" placeholder="Enter address" required>
                    <mat-error
                        *ngIf="supplierForm.get('address')?.touched && supplierForm.get('address')?.hasError('required')">
                        Please enter an address.
                    </mat-error>
                </mat-form-field>
            </div>

            <!-- Annual Billing -->
            <div class="form-section">
                <mat-form-field appearance="fill">
                    <mat-label>Annual Billing</mat-label>
                    <input matInput formControlName="annualBilling" placeholder="Enter annual billing" required>
                    <mat-error
                        *ngIf="supplierForm.get('annualBilling')?.touched && supplierForm.get('annualBilling')?.hasError('required')">
                        Please enter the annual billing amount.
                    </mat-error>
                    <mat-error
                        *ngIf="supplierForm.get('annualBilling')?.touched && supplierForm.get('annualBilling')?.hasError('pattern')">
                        Please enter a valid number (e.g., 1,000.50).
                    </mat-error>
                </mat-form-field>
            </div>

        </div>

    </form>
</div>

<div mat-dialog-actions align="end">
    <button mat-button (click)="cancel()">Cancel</button>
    <button mat-raised-button color="primary" (click)="save()" [disabled]="!supplierForm.valid">Save</button>
</div>